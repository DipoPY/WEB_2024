{% macro book_form(genres, url, current_user, new_genres, book={}) %}
<form action="{{ url }}" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="name">Название</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ book.name or '' }}" required>
    </div>
    <div class="form-group">
        <label for="cover_img">Обложка</label>
        <input type="file" class="form-control-file" id="cover_img" name="cover_img">
    </div>
    <div class="form-group">
        <label for="short_desc">Описание</label>
        <textarea class="form-control" id="short_desc" name="short_desc">{{ book.short_desc or '' }}</textarea>
    </div>
    <div class="form-group">
        <label for="year">Год написания</label>
        <input type="text" class="form-control" id="year" name="year" value="{{ book.year or '' }}" required>
    </div>
    <div class="form-group">
        <label for="pub_house">Издательство</label>
        <input type="text" class="form-control" id="pub_house" name="pub_house" value="{{ book.pub_house or '' }}" required>
    </div>
    <div class="form-group">
        <label for="author">Автор</label>
        <input type="text" class="form-control" id="author" name="author" value="{{ book.author or '' }}" required>
    </div>
    <div class="form-group">
        <label for="volume">Количество страниц</label>
        <input type="number" class="form-control" id="volume" name="volume" value="{{ book.volume or '' }}" required>
    </div>
    <div class="form-group">
        <label>Жанры</label>
        <div>
            {% for genre in genres %}
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="genre_{{ genre.id }}" name="genre_id" value="{{ genre.id }}" {% if genre.id|string in new_genres %}checked{% endif %}>
                <label class="form-check-label" for="genre_{{ genre.id }}">
                    {{ genre.name }}
                </label>
            </div>
            {% endfor %}
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>
<script>
    new EasyMDE({ element: document.getElementById('short_desc') });
</script>
{% endmacro %}
